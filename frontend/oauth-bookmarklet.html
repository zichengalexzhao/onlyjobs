<!DOCTYPE html>
<html>
<head>
    <title>OAuth Helper Bookmarklet</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .bookmarklet { background: #f0f0f0; padding: 10px; border-radius: 5px; margin: 10px 0; }
        .bookmarklet a { color: #007cba; text-decoration: none; font-weight: bold; }
        code { background: #f5f5f5; padding: 2px 4px; border-radius: 3px; }
    </style>
</head>
<body>
    <h1>OAuth Helper for Gmail Integration</h1>
    
    <h2>Quick Solution:</h2>
    <p>When you see the JSON response <code>{"code":"...","status":"received"}</code>, simply:</p>
    <ol>
        <li><strong>Copy this URL:</strong> <code>http://localhost:3000/settings?success=gmail-connected</code></li>
        <li><strong>Paste it in the address bar</strong> and press Enter</li>
        <li><strong>Your Gmail is already connected!</strong> The OAuth worked perfectly.</li>
    </ol>

    <h2>Alternative - Bookmarklet (Drag to bookmarks bar):</h2>
    <div class="bookmarklet">
        <a href="javascript:(function(){if(document.body.textContent.includes('status') && document.body.textContent.includes('received')){document.body.innerHTML='<div style=\"display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;font-family:Arial,sans-serif;background-color:#f5f5f5;margin:0;\"><div style=\"width:48px;height:48px;border-radius:50%;background-color:#4caf50;display:flex;align-items:center;justify-content:center;color:white;font-size:24px;margin-bottom:16px;\">‚úì</div><h2 style=\"color:#333;margin-bottom:8px;\">Gmail Connected Successfully!</h2><p style=\"color:#666;text-align:center;\">Redirecting you back to settings...</p></div>';setTimeout(function(){window.location.href='http://localhost:3000/settings?success=gmail-connected';},2000);}else{alert('Use this on the OAuth success page');}})()" 
               onclick="alert('Drag this link to your bookmarks bar, then click it when you see the JSON response')">
            üîÑ OAuth Redirect Helper
        </a>
    </div>

    <h2>How to use the bookmarklet:</h2>
    <ol>
        <li>Drag the "üîÑ OAuth Redirect Helper" link above to your bookmarks bar</li>
        <li>When you see the JSON response, click the bookmark</li>
        <li>It will automatically redirect you back to settings</li>
    </ol>

    <h2>What's happening:</h2>
    <p>‚úÖ <strong>OAuth is working perfectly!</strong> Your Gmail tokens are being saved successfully.</p>
    <p>‚ùå The only issue is that the backend shows JSON instead of redirecting automatically.</p>
    <p>üí° Both solutions above work around this by manually redirecting you back to the frontend.</p>

    <h2>For the backend developer:</h2>
    <p>To fix this permanently, the backend's <code>GET /api/gmail/callback</code> endpoint should redirect to:<br>
    <code>http://localhost:3000/callback?success=gmail-connected</code> instead of returning JSON.</p>
</body>
</html>